<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test FeexPay SDK JavaScript</title>
    <!-- SDK JavaScript officiel FeexPay -->
    <script src="https://api.feexpay.me/feexpay-javascript-sdk/index.js"></script>
</head>
<body>
    <div style="padding: 20px; font-family: Arial, sans-serif;">
        <h2>üß™ Test SDK JavaScript FeexPay</h2>
        <p><strong>Shop ID:</strong> 67d68239474b2509dcde6d10</p>
        <p><strong>Mode:</strong> LIVE</p>
        <p><strong>Montant:</strong> 500 FCFA</p>
        
        <!-- Zone o√π le bouton FeexPay appara√Ætra -->
        <div id="render"></div>
        
        <div style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 5px;">
            <h3>üìã R√©sultat du test:</h3>
            <pre id="result">En attente du test...</pre>
        </div>
    </div>

    <script>
        // Attendre que le DOM et le SDK soient charg√©s
        function initFeexPay() {
            console.log("üîç V√©rification disponibilit√© FeexPayButton...");
            
            if (typeof FeexPayButton === 'undefined') {
                document.getElementById('result').textContent = "‚ùå ERREUR: SDK FeexPay non charg√© !\nV√©rifiez votre connexion internet.";
                console.error("‚ùå FeexPayButton non disponible");
                return;
            }
            
            console.log("‚úÖ FeexPayButton disponible, initialisation...");
            document.getElementById('result').textContent = "üîÑ Initialisation du SDK FeexPay...";
            
            try {
                // Initialisation du bouton FeexPay selon la documentation officielle
                FeexPayButton.init("render", {
                    // ID de votre boutique FeexPay
                    id: "67d68239474b2509dcde6d10",
                    
                    // Montant de la transaction en XOF
                    amount: 500,
                    
                    // Token API s√©curis√© (VOTRE VRAI TOKEN)
                    token: "fp_zcQUI4ljedD7HTQyJToo9pOGEHErtGRysTsVrca6ll7WzgY2sFMnq5FHloJPzGl2",
                    
                    // Fonction de rappel apr√®s le paiement
                    callback: (response) => {
                        console.log("üéâ R√©ponse FeexPay:", response);
                        document.getElementById('result').textContent = JSON.stringify(response, null, 2);
                        
                        // Si succ√®s, afficher message
                        if (response.status === 'SUCCESSFUL') {
                            alert('‚úÖ Paiement r√©ussi ! SMS re√ßu ?');
                        } else if (response.status === 'FAILED') {
                            alert('‚ùå Paiement √©chou√©: ' + (response.reason || 'Erreur inconnue'));
                        } else {
                            alert('‚è≥ Paiement en cours...');
                        }
                    },
                    
                    // Mode LIVE pour production
                    mode: "LIVE",
                    
                    // R√©f√©rence personnalis√©e
                    custom_id: "test-js-sdk-" + Date.now(),
                    
                    // Description de la transaction
                    description: "Test SDK JavaScript FeexPay",
                    
                    // Type de paiement : MOBILE seulement pour forcer mobile money
                    case: "MOBILE"
                });
                
                console.log("üöÄ SDK JavaScript FeexPay initialis√© avec succ√®s");
                document.getElementById('result').textContent = "‚úÖ SDK initialis√© ! Le bouton devrait appara√Ætre ci-dessus.";
                
            } catch (error) {
                console.error("‚ùå Erreur initialisation FeexPay:", error);
                document.getElementById('result').textContent = "‚ùå ERREUR: " + error.message;
            }
        }
        
        // Diff√©rentes m√©thodes pour s'assurer que tout est charg√©
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initFeexPay);
        } else {
            // Attendre un peu que le SDK se charge
            setTimeout(initFeexPay, 1000);
        }
        
        // Backup si le SDK prend du temps √† charger
        window.addEventListener('load', function() {
            setTimeout(initFeexPay, 2000);
        });
        
        console.log("üìã Script de test FeexPay charg√©");
    </script>
</body>
</html>